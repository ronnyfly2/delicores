(function(){define(["libUnderscore","initBxSlider"],function(e,l){"user strict";var n,t,a,r,s,o,h,i,c,k,d;h=void 0;i={ticketsItems:".Tickets-items",ticketsDetail:".Tickets-detail",tplTicketsDetail:".tplTicketsDetail",tplTicket:".tplTicket",inpSearch:".Tickets-search-box",resultSearch:".resultSearch",cleanerSearch:".Tickets-search-cleaner"};a={};d="selected";c=false;o=function(){var e,i;e=a.ticketsDetail.find(".Slider-item");i=0;[].forEach.call(e,function(e){var t;t=$(e).height();if(i<t){i=t}});e.height(i)};t=function(c){Object.keys(c).forEach(function(e,t,i){a[e]=$(c[e])})};s=function(e){var t,i,c;t=_.template(a.tplTicketsDetail.html())({items:e});c=_.template(a.tplTicket.html())({tickets:e});a.ticketsDetail.html(t);a.ticketsItems.html(c);n();a.tickets.eq(0).addClass(d);h=l.init($(".bxslider"),{controls:(i=e.length>1)!=null?i:{true:false},infiniteLoop:true,mode:"horizontal",adaptiveHeight:true,pager:false,touchEnabled:true,prevSelector:$(".Slider-arrow-left span"),nextSelector:$(".Slider-arrow-right span"),onSlideBefore:function(e,t,i){a.tickets.removeClass(d);a.tickets.eq(i).addClass(d)},onSliderLoad:function(){o()}});a.tickets.on("click",r.selectTicket)};n=function(){a.tickets=$(".Ticket")};k=function(){a.inpSearch.on("keyup",_.debounce(r.searchTicket,600));a.cleanerSearch.on("click",r.cleanerSearch)};r={cleanerSearch:function(e){a.inpSearch.val("").trigger("keyup");$(this).hide()},selectTicket:function(e){h.goToSlide(parseInt($(this).data("index"),10))},searchTicket:function(e){var t,i,c,l;t=$(this);l=t.val().toLowerCase().trim();i=l.length;a.resultSearch.hide();if(i>2){c=listDetail.filter(function(e,t,i){var c;if(e.infoCine.name_movie!==null){c=e.infoCine.name_movie.toLowerCase();return c.indexOf(l)!==-1}else{return false}});if(c.length){s(c)}else{s(c);a.ticketsItems.html('<div class="Ticket selected"></div><div class="Ticket">no se encontraron tickets con '+l+"</div>")}a.cleanerSearch.show()}else{a.cleanerSearch.hide();s(listDetail)}}};t(i);s(listDetail);k()})}).call(this);