(function(){define(["libUnderscore"],function(){var e,t,a,o,c,r,l,i,s,n,h;s=0;n={readyState:0};l={body:"body",ctnLoader:".box_search",inputSearch:"input.js-search, input.js-search_movie",tplLoadSearch:".tplLoadSeach",tplSearchMovies:".tplSearchMovies",tplEmtySearch:".tplEmtySearch"};t={};r="";s=null;c=null;h=null;e=function(e){t.body=$(e.body);t.ctnLoader=$(e.ctnLoader);t.inputSearch=$(e.inputSearch);t.tplLoadSearch=_.template($(e.tplLoadSearch).html());t.tplSearchMovies=_.template($(e.tplSearchMovies).html());t.tplEmtySearch=_.template($(e.tplEmtySearch).html())};i=function(){t.inputSearch.val("");t.inputSearch.on("keyup",a.evtSearch);$(".close_search").on("click",o.clearSearch)};a={evtSearch:function(){var e;e=$.trim($(this).val());if(e.length>=2){if(e!==r){r=e;if(c){clearTimeout(c)}if(h){h.abort()}c=setTimeout(function(){return o.searchMovie(e)},400)}}else{o.clearSearch()}return false}};o={clearSearch:function(e){r="";if(c){clearTimeout(c)}if(h){h.abort()}if(typeof e!=="undefined"){t.inputSearch.val("")}$(".modal_search").removeClass("open_search");$(".close_search").removeClass("activated_close");$(".modal_search").html("");t.body.removeClass("fixsearch");$(".container").show();if(typeof window.slideTopHome!=="undefined"){return window.slideTopHome.startAuto()}},searchMovie:function(e){console.log(e);h=$.ajax({method:"GET",url:"/webservice/movie/search",dataType:"JSON",data:{movie:e},beforeSend:function(){if(typeof window.slideTopHome!=="undefined"){window.slideTopHome.stopAuto()}$(".container").hide();t.body.addClass("fixsearch");$(".modal_search").html(t.tplLoadSearch());$(".modal_search").addClass("open_search");$(".close_search").addClass("activated_close")},success:function(e){var a;a=t.tplEmtySearch();if(e.status===1){a=t.tplSearchMovies({result:e.data})}$(".modal_search").html(a)}})}};e(l);i()})}).call(this);